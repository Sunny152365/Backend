{% extends "analyzer/base.html" %}

{% block title %}ê²€ìƒ‰{% endblock %}

{% block content %}
  <h1>ğŸ” ì›Œë“œí´ë¼ìš°ë“œ ìƒì„±ê¸°</h1>

  {% if error %}
    <p style="color: red;">{{ error }}</p>
  {% endif %}

  <!-- âœ… í•˜ë‚˜ë¡œ í†µì¼ëœ ê²€ìƒ‰ í¼ -->
  <form method="post" action="{% url 'analyzer:result' %}">
    {% csrf_token %}
    <input type="text" name="keyword" placeholder="í‚¤ì›Œë“œ ì…ë ¥" required>
    
    <select name="category">
      <option value="news">ë‰´ìŠ¤</option>
      <option value="blog">ë¸”ë¡œê·¸</option>
    </select>

    <!-- âœ… ì¼ë°˜ í¬ë¡¤ë§ ë²„íŠ¼ -->
    <button type="submit" name="source" value="general">
      ì¼ë°˜ í¬ë¡¤ë§
    </button>

    <!-- âœ… ë„¤ì´ë²„ API ë²„íŠ¼ (ë¹„ë¡œê·¸ì¸ ì‹œ ë¹„í™œì„±í™”) -->
    <button type="submit" name="source" value="naver"
      {% if not user.is_authenticated %}disabled title="ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥"{% endif %}
      style="background-color: #03C75A; color: white; border: none; padding: 0.5rem 1rem; margin-left: 1rem;">
      ë„¤ì´ë²„ API í¬ë¡¤ë§
    </button>
  </form>

  {% if user.is_authenticated %}
    <p style="margin-top: 1rem;">
      ğŸ‘‹ ì•ˆë…•í•˜ì„¸ìš”, {{ user.username }}ë‹˜ |
      <a href="{% url 'analyzer:logout' %}">ë¡œê·¸ì•„ì›ƒ</a> |
      <a href="{% url 'analyzer:history' %}">ê²€ìƒ‰ ê¸°ë¡</a>
    </p>
  {% else %}
    <p style="color: gray;">ë¹„íšŒì›ì€ í•˜ë£¨ 3ë²ˆê¹Œì§€ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    <p>
      <a href="{% url 'analyzer:login' %}">ë¡œê·¸ì¸</a> |
      <a href="{% url 'analyzer:signup' %}">íšŒì›ê°€ì…</a>
    </p>
  {% endif %}
{% endblock %}
